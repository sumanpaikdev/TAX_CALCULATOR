<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master Tax & Audit Calculator (FY 2025-26)</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: #f8f9fa; padding: 20px; color: #333; }
        .container { background: white; max-width: 950px; margin: 0 auto; padding: 30px; border-radius: 12px; box-shadow: 0 8px 30px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #004085; margin-bottom: 5px; }
        .input-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 30px 0; background: #e9ecef; padding: 20px; border-radius: 8px; }
        label { font-weight: bold; display: block; margin-bottom: 8px; }
        input, select { width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; font-size: 16px; box-sizing: border-box; }
        
        .audit-badge { text-align: center; padding: 15px; border-radius: 8px; margin-bottom: 20px; font-weight: bold; font-size: 1.1em; }
        .safe { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeeba; }
        .danger { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th { background: #f1f3f5; padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6; }
        td { padding: 12px; border-bottom: 1px solid #eee; }
        .total-row { font-weight: bold; background: #f8f9fa; }
        .final-row { background: #004085; color: white; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>Interactive Professional Tax Tool</h2>
    <p style="text-align:center; color:#666;">FY 2025-26 | New Tax Regime | Section 44ADA & 44AB</p>

    <div class="input-grid">
        <div>
            <label>Gross Receipts (â‚¹)</label>
            <input type="number" id="grossInput" value="7000000" oninput="calculate()">
        </div>
        <div>
            <label>Declare Profit % (Min 50%)</label>
            <select id="profitPercent" onchange="calculate()">
                <option value="0.50">50% (Standard 44ADA)</option>
                <option value="0.40">40% (Lower Profit - Triggers Audit)</option>
                <option value="0.30">30% (Lower Profit - Triggers Audit)</option>
            </select>
        </div>
    </div>

    <div id="auditStatus" class="audit-badge">Checking Audit Status...</div>

    <table>
        <thead>
            <tr>
                <th>Bucket</th>
                <th>Range</th>
                <th>Rate</th>
                <th>Calculation</th>
                <th>Tax</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
        <tfoot>
            <tr class="total-row"><td colspan="4" align="right">Base Tax:</td><td id="baseTax">â‚¹0</td></tr>
            <tr style="color:red;"><td colspan="4" align="right">Health & Edu Cess (4%):</td><td id="cess">â‚¹0</td></tr>
            <tr class="final-row"><td colspan="4" align="right">Total Payable:</td><td id="totalPayable">â‚¹0</td></tr>
        </tfoot>
    </table>
</div>

<script>
function calculate() {
    const gross = parseFloat(document.getElementById('grossInput').value) || 0;
    const pRate = parseFloat(document.getElementById('profitPercent').value);
    const profit = gross * pRate;
    
    // --- 1. Audit Logic ---
    let auditMsg = "âœ… Audit NOT Required (Receipts â‰¤ 75L & Profit â‰¥ 50%)";
    let auditClass = "safe";

    if (gross > 7500000) {
        auditMsg = "ðŸš¨ Audit MANDATORY (Gross Receipts exceed â‚¹75 Lakh limit)";
        auditClass = "danger";
    } else if (pRate < 0.50) {
        auditMsg = "âš ï¸ Audit MANDATORY (Declaring profit below 50% shortcut)";
        auditClass = "warning";
    }
    const badge = document.getElementById('auditStatus');
    badge.innerText = auditMsg;
    badge.className = "audit-badge " + auditClass;

    // --- 2. Tax Calculation (Slabs) ---
    const slabs = [
        { label: "B1", range: "0-4L", limit: 400000, rate: 0 },
        { label: "B2", range: "4-8L", limit: 400000, rate: 0.05 },
        { label: "B3", range: "8-12L", limit: 400000, rate: 0.10 },
        { label: "B4", range: "12-16L", limit: 400000, rate: 0.15 },
        { label: "B5", range: "16-20L", limit: 400000, rate: 0.20 },
        { label: "B6", range: "20-24L", limit: 400000, rate: 0.25 },
        { label: "B7", range: "24L+", limit: Infinity, rate: 0.30 }
    ];

    let remaining = profit;
    let totalBase = 0;
    let html = "";

    slabs.forEach(s => {
        let taxable = Math.max(0, Math.min(remaining, s.limit));
        let tax = taxable * s.rate;
        totalBase += tax;
        remaining -= taxable;
        html += `<tr><td>${s.label}</td><td>${s.range}</td><td>${s.rate*100}%</td><td>${taxable.toLocaleString('en-IN')} Ã— ${s.rate*100}%</td><td>â‚¹${tax.toLocaleString('en-IN')}</td></tr>`;
    });

    const cess = totalBase * 0.04;
    document.getElementById('tableBody').innerHTML = html;
    document.getElementById('baseTax').innerText = "â‚¹" + totalBase.toLocaleString('en-IN');
    document.getElementById('cess').innerText = "â‚¹" + cess.toLocaleString('en-IN');
    document.getElementById('totalPayable').innerText = "â‚¹" + (totalBase + cess).toLocaleString('en-IN');
}
calculate();
</script>
</body>
</html>
