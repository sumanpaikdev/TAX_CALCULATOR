<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Tax & Audit Tool</title>
    <style>
        /* --- General Layout --- */
        body { font-family: 'Segoe UI', sans-serif; background-color: #f8f9fa; padding: 10px; color: #333; margin: 0; }
        .container { background: white; max-width: 950px; margin: 10px auto; padding: 20px; border-radius: 12px; box-shadow: 0 8px 30px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #004085; font-size: 1.5rem; margin-bottom: 5px; }
        
        /* --- Inputs --- */
        .input-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0; background: #e9ecef; padding: 15px; border-radius: 8px; }
        label { font-weight: bold; display: block; margin-bottom: 5px; font-size: 0.9rem; }
        input, select { width: 100%; padding: 10px; border: 1px solid #ced4da; border-radius: 6px; font-size: 16px; box-sizing: border-box; }

        /* --- Responsive Table Fix --- */
        .table-wrapper { 
            width: 100%; 
            overflow-x: auto; /* Enable horizontal scroll on mobile */
            -webkit-overflow-scrolling: touch; /* Smooth scrolling for iOS */
            margin-top: 10px;
            border: 1px solid #eee;
            border-radius: 8px;
        }
        table { width: 100%; border-collapse: collapse; min-width: 600px; /* Forces scroll on small screens */ }
        th { background: #f1f3f5; padding: 10px; text-align: left; font-size: 0.85rem; border-bottom: 2px solid #dee2e6; }
        td { padding: 10px; border-bottom: 1px solid #eee; font-size: 0.85rem; }

        /* --- Audit Badges --- */
        .audit-badge { text-align: center; padding: 12px; border-radius: 8px; margin-bottom: 15px; font-weight: bold; font-size: 0.95rem; }
        .safe { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeeba; }
        .danger { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

        /* --- Totals --- */
        .total-row { font-weight: bold; background: #f8f9fa; }
        .final-row { background: #004085; color: white; font-weight: bold; }

        /* --- Mobile Adjustments --- */
        @media (max-width: 600px) {
            .input-grid { grid-template-columns: 1fr; } /* Stack inputs on phone */
            h2 { font-size: 1.2rem; }
            .container { padding: 15px; }
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Professional Tax Tool</h2>
    <p style="text-align:center; color:#666; font-size: 0.8rem;">FY 2025-26 | Sec 44ADA & 44AB</p>

    <div class="input-grid">
        <div>
            <label>Gross Receipts (‚Çπ)</label>
            <input type="number" id="grossInput" value="7000000" oninput="calculate()">
        </div>
        <div>
            <label>Declare Profit %</label>
            <select id="profitPercent" onchange="calculate()">
                <option value="0.50">50% (Standard)</option>
                <option value="0.40">40% (Audit Warning)</option>
                <option value="0.30">30% (Audit Warning)</option>
            </select>
        </div>
    </div>

    <div id="auditStatus" class="audit-badge">Checking Status...</div>

    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th>Bucket</th>
                    <th>Range</th>
                    <th>Rate</th>
                    <th>Calculation</th>
                    <th>Tax</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
            <tfoot>
                <tr class="total-row"><td colspan="4" align="right">Base Tax:</td><td id="baseTax">‚Çπ0</td></tr>
                <tr style="color:red;"><td colspan="4" align="right">Cess (4%):</td><td id="cess">‚Çπ0</td></tr>
                <tr class="final-row"><td colspan="4" align="right">Total Payable:</td><td id="totalPayable">‚Çπ0</td></tr>
            </tfoot>
        </table>
    </div>
    <p style="font-size: 0.75rem; color: #999; margin-top: 10px; text-align: center;">‚Üê Scroll table sideways on mobile if hidden ‚Üí</p>
</div>

<script>
function calculate() {
    const gross = parseFloat(document.getElementById('grossInput').value) || 0;
    const pRate = parseFloat(document.getElementById('profitPercent').value);
    const profit = gross * pRate;
    
    // Audit Logic
    let auditMsg = "‚úÖ Audit NOT Required";
    let auditClass = "safe";
    if (gross > 7500000) { auditMsg = "üö® Audit MANDATORY (>75L)"; auditClass = "danger"; }
    else if (pRate < 0.50) { auditMsg = "‚ö†Ô∏è Audit MANDATORY (Profit < 50%)"; auditClass = "warning"; }
    
    const badge = document.getElementById('auditStatus');
    badge.innerText = auditMsg;
    badge.className = "audit-badge " + auditClass;

    // Tax Slabs
    const slabs = [
        { label: "B1", range: "0-4L", limit: 400000, rate: 0 },
        { label: "B2", range: "4-8L", limit: 400000, rate: 0.05 },
        { label: "B3", range: "8-12L", limit: 400000, rate: 0.10 },
        { label: "B4", range: "12-16L", limit: 400000, rate: 0.15 },
        { label: "B5", range: "16-20L", limit: 400000, rate: 0.20 },
        { label: "B6", range: "20-24L", limit: 400000, rate: 0.25 },
        { label: "B7", range: "24L+", limit: Infinity, rate: 0.30 }
    ];

    let remaining = profit;
    let totalBase = 0;
    let html = "";

    slabs.forEach(s => {
        let taxable = Math.max(0, Math.min(remaining, s.limit));
        let tax = taxable * s.rate;
        totalBase += tax;
        remaining -= taxable;
        html += `<tr><td>${s.label}</td><td>${s.range}</td><td>${s.rate*100}%</td><td>${taxable.toLocaleString('en-IN')}</td><td>‚Çπ${tax.toLocaleString('en-IN')}</td></tr>`;
    });

    document.getElementById('tableBody').innerHTML = html;
    document.getElementById('baseTax').innerText = "‚Çπ" + totalBase.toLocaleString('en-IN');
    document.getElementById('cess').innerText = "‚Çπ" + (totalBase * 0.04).toLocaleString('en-IN');
    document.getElementById('totalPayable').innerText = "‚Çπ" + (totalBase * 1.04).toLocaleString('en-IN');
}
calculate();
</script>
</body>
</html>
